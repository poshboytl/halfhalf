<div class="h-full flex flex-col">
  <!-- Header -->
  <header class="bg-gray-800 border-b border-gray-700 px-4 py-3 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <h1 class="text-xl font-bold">Half & Half ğŸ«–</h1>
      <% if @gateway_config %>
        <span class="text-sm text-green-400 flex items-center gap-1">
          <span class="w-2 h-2 bg-green-400 rounded-full"></span>
          <%= @gateway_config.name %>
        </span>
      <% end %>
    </div>
    <div class="flex items-center gap-4">
      <span class="text-gray-400 text-sm"><%= current_user.email %></span>
      <%= button_to "Logout", logout_path, method: :delete, class: "text-gray-400 hover:text-white text-sm" %>
    </div>
  </header>

  <% if @gateway_config.nil? %>
    <!-- No gateway configured -->
    <div class="flex-1 flex items-center justify-center">
      <div class="text-center">
        <div class="text-6xl mb-4">ğŸ”Œ</div>
        <h2 class="text-2xl font-bold mb-2">è¿æ¥ä½ çš„ OpenClaw</h2>
        <p class="text-gray-400 mb-6">é…ç½® Gateway å¼€å§‹å¯¹è¯</p>
        <%= link_to "è¿æ¥ Gateway", new_gateway_config_path, class: "bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg transition" %>
      </div>
    </div>
  <% else %>
    <!-- Chat interface -->
    <div class="flex-1 flex overflow-hidden">
      <!-- Messages area -->
      <div class="flex-1 flex flex-col">
        <div id="messages" class="flex-1 overflow-y-auto p-4 space-y-4">
          <!-- Messages will be rendered here -->
          <div class="text-center text-gray-500 py-8">
            <p>å¼€å§‹å’Œä½ çš„ AI å¯¹è¯å§ï¼</p>
          </div>
        </div>

        <!-- Input area -->
        <div class="border-t border-gray-700 p-4">
          <%= form_with url: "#", method: :post, class: "flex gap-3", data: { controller: "chat", action: "submit->chat#send" } do %>
            <textarea
              name="content"
              rows="1"
              placeholder="è¾“å…¥æ¶ˆæ¯..."
              class="flex-1 bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              data-chat-target="input"
              data-action="keydown->chat#handleKeydown"
            ></textarea>
            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg transition">
              å‘é€
            </button>
          <% end %>
        </div>
      </div>

      <!-- Sidebar (future: sub-agents) -->
      <div class="w-64 bg-gray-800 border-l border-gray-700 p-4 hidden lg:block">
        <h3 class="text-sm font-medium text-gray-400 uppercase tracking-wide mb-3">Sub-agents</h3>
        <p class="text-gray-500 text-sm">æš‚æ— è¿è¡Œä¸­çš„ä»»åŠ¡</p>
      </div>
    </div>
  <% end %>
</div>
